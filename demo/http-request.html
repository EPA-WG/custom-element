<!DOCTYPE html>
<html lang="en" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>http-request Declarative Custom Element implementation demo</title>
    <script type="module" src="../http-request.js"></script>
    <script type="module" src="../custom-element.js"></script>
    <style>
        body,nav{ display: flex; flex-wrap: wrap; align-content: stretch; gap: 1rem; }
        body>*{flex: auto;}
        nav{ flex-direction: column;}
        custom-element{display: none;}
        dce-link,dce-1-slot,dce-2-slot,dce-3-slot,dce-4-slot,dce-2-slots,greet-element,pokemon-tile
            { box-shadow: 0 0 0.5rem lime; padding: 1rem; display: inline-block; }
        dd{ padding: 1rem;}
        p{ margin: 0;}
        button
        {   display: inline-flex; flex-direction: column; align-items: center; flex: auto;
            box-shadow: inset silver 0px 0px 1rem; min-width: 12rem; padding: 1rem;
            color: coral; text-shadow: 1px 1px silver; font-weight: bolder;
        }
        button img{ max-height: 10vw; min-height: 4rem;}
        table{ min-width: 16rem; }
        td{ border-bottom: 1px solid silver; }
        tfoot td{ border-bottom: none; }
        td,th{text-align: right; }
        caption{ padding: 1rem; font-weight: bolder; font-family: sans-serif; }
        dce-1{ padding: 0; display: flex; flex-wrap: wrap;}
        code{ text-align: right; min-width: 3rem;}
    </style>
</head>
<body>


<html-demo-element legend="1. http-request simplest"
                   description="load the list of pokemons">
    <p>Should display 10 image buttons with pokemon name </p>
    <template>
<custom-element tag="dce-1" hidden>
    <template><!-- wrapping into template to prevent images loading within DCE declaration -->
        <http-request
            url="https://pokeapi.co/api/v2/pokemon?limit=10&offset=0"
            slice="page"
            ></http-request>
        <xsl:for-each select="//slice/page/data/results/*">
            <xsl:variable name="slides-url"
                >https://unpkg.com/pokeapi-sprites@2.0.2/sprites/pokemon/other/dream-world</xsl:variable>
            <xsl:variable name="pokeid"
                select="substring-before( substring-after( @url, 'https://pokeapi.co/api/v2/pokemon/'),'/')"
                ></xsl:variable>
            <button>
                <img src="{$slides-url}/{$pokeid}.svg"
                     alt="{@name}"/>
                <xsl:value-of select='@name'/>
            </button>
        </xsl:for-each>
    </template>
</custom-element>
<dce-1></dce-1>
    </template>
</html-demo-element>


<script type="module" src="https://unpkg.com/html-demo-element@1/html-demo-element.js"></script>

</body>
</html>
